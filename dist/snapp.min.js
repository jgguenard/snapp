var sn;
(function(d){d.config={logPrefix:"snapp: ",debug:!0};d.componentMethods=["controller","view","dispose"];d.element=function(a,c,e){return a&&""!==a?"object"===typeof a?{nodeType:d.vdom.node.COMPONENT,tagName:a,attributes:c,virtual:!0}:d.vdom.createVirtualNode(a,c,e):null};d.log=function(a){!0===d.config.debug&&console.log(d.config.logPrefix+a)};d.isInteger=function(a){var c;return isNaN(a)?!1:(c=parseFloat(a),(0|c)===c)};d.mount=function(a,c){(new d.Component(c)).mount(a)};var a=function(a){this.activeRenderJob=null;
this.mounted=!1;this.definition=a;this.observables=[];var c=this;this.scope=new Proxy({},{get:function(a,b){void 0!==a[b]&&"function"!==typeof a[b]&&0>c.observables.indexOf(b)&&(d.log("Observing property <"+c.definition.name+"::"+b.toString()+">"),c.observables.push(b));return a[b]},set:function(a,b,f){a[b]=f;"function"!==typeof f&&0<=c.observables.indexOf(b)&&(d.log("Rendering of <"+c.definition.name+"> triggered by observable <"+c.definition.name+"::"+b.toString()+">"),c.render());return!0}})};
a.prototype.mount=function(a){var c=d.vdom.getAttribute(a,"data-sn-component");c&&c.unmount();d.log("Mounting component <"+this.definition.name+">");d.vdom.setAttribute(a,"data-sn-component",this);this.mounted=!0;this.container=a;this.vContainer=d.vdom.createContainerFromNode(a);for(var e in this.definition)"function"==typeof this.definition[e]&&0>d.componentMethods.indexOf(e)&&(this.scope[e]=this.definition[e]);this.definition.controller&&this.definition.controller.call(this.scope);this.render();
d.log("Component <"+this.definition.name+"> mounted")};a.prototype.unmount=function(){this.definition.dispose&&this.definition.dispose.call(this.scope);this.mounted=!1;d.log("Component <"+this.definition.name+"> unmounted")};a.prototype.render=function(){if(!0===this.mounted&&this.definition.view){this.activeRenderJob&&(d.log("Rendering request for <"+this.definition.name+"> ignored"),clearTimeout(this.activeRenderJob));var a=this.definition.view.call(this.scope,this.vContainer);d.vdom.isVirtualNode(a)&&
(a=d.vdom.createContainerFromNode(a));a=d.vdom.diff(this.container,a);d.vdom.apply(a);d.log("Rendering component <"+this.definition.name+">");this.activeRenderJob=null}else d.log("Rendering request for <"+this.definition.name+"> ignored")};d.Component=a})(sn||(sn={}));var el=sn.element;
(function(d){d.router={routes:{},params:[],named_params:{},enabled:!1,getPath:function(){var a=window.location.href.match(/#(.*)$/);return"/"+this.clearSlashes(a?a[1]:"")},clearSlashes:function(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")},param:function(a,b){return d.isInteger(a)?this.params[a]||b:this.named_params[a]||b},update:function(){var a=this.getPath(),b=[],c={},a=a.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(a,b,d){c[b]=decodeURIComponent(d);return""}),e;for(e in this.routes){var h=
"^"+e.replace(/:[^/]+/g,"([^/]+)")+"$";if(h=a.match(h)){h.shift();var a=e.match(/:([^/:]+)/g),f;for(f in a){var g=decodeURIComponent(h[f]);b.push(g);c[a[f].replace(":","")]=g}this.params=b;this.named_params=c;d.log("Taking route "+e);this.routes[e]();break}}},setEnabled:function(a){var b=this;!0!==a||this.enabled?a||(window.removeEventListener("hashchange",this.update.bind(this)),this.enabled=!1):setTimeout(function(){window.addEventListener("hashchange",b.update.bind(b));b.enabled=!0;b.update()},
0)},setRoutes:function(a){this.routes=a;this.setEnabled(!0)},redirect:function(a,b){if(b)for(var c in b)a=a.replace(":"+c,encodeURIComponent(b[c]));window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a}}})(sn||(sn={}));
(function(d){d.vdom={operation:{APPEND_CHILD:"APPEND_CHILD",REPLACE_CHILD:"REPLACE_CHILD",REMOVE_CHILD:"REMOVE_CHILD",REMOVE_ATTRIBUTE:"REMOVE_ATTRIBUTE",SET_ATTRIBUTE:"SET_ATTRIBUTE",SET_EVENT:"SET_EVENT"},node:{COMMENT:8,ELEMENT:1,TEXT:3,COMPONENT:99},setAttribute:function(a,b,c){"class"===b?a.className=c:"style"===b?a.style.cssText=c:"type"!==b&&b in a||"string"!==typeof c?a[b]=null==c?"":c:a.setAttribute?a.setAttribute(b,c):a.attributes&&(a.attributes[b]=c)},getAttribute:function(a,b){if("class"===
b)return a.className;if("style"===b)return a.style.cssText;if("type"!==b&&b in a)return a[b];if(a.getAttribute)return a.getAttribute(b);if(a.attributes&&a.attributes[b])return a.attributes[b].value},removeAttribute:function(a,b){"class"===b?a.className="":"style"===b?a.style.cssText="":"type"!==b&&b in a?a[b]="":a.removeAttribute?a.removeAttribute(b):a.attributes&&delete a.attributes[b]},diffNode:function(a,b){for(var c=[],e=a.attributes||[],h=b.attributes||[],f=0;f<e.length;f++){var g=e[f],k=h[g.name],
m=this.getAttribute(a,g.name),l=this.getAttribute(b,g.name);k?m!==l&&c.push({type:d.vdom.operation.SET_ATTRIBUTE,source:a,destination:b,attribute:{name:g.name,value:l}}):c.push({type:d.vdom.operation.REMOVE_ATTRIBUTE,source:a,attribute:{name:g.name}})}for(f=0;f<h.length;f++)g=h[f],e[g.name]||(k=this.getAttribute(b,g.name),c.push({type:d.vdom.operation.SET_ATTRIBUTE,source:a,destination:b,attribute:{name:g.name,value:k}}));return c=c.concat(this.diff(a,b))},diff:function(a,b){for(var c=[],e=b.childNodes?
b.childNodes.length:0,h=a.childNodes?a.childNodes.length:0,f=0;f<e;f++){var g=b.childNodes[f],k=a.childNodes[f];k?k.nodeType!==g.nodeType||k.tagName||k.tagName!==g.tagName?c.push({type:d.vdom.operation.REPLACE_CHILD,source:a,destination:g,node:k}):c=c.concat(this.diffNode(k,g)):c.push({type:d.vdom.operation.APPEND_CHILD,source:a,node:g})}if(e<h)for(;e<h;e++)c.push({type:d.vdom.operation.REMOVE_CHILD,source:a,node:a.childNodes[e]});return c},apply:function(a){for(var b in a){var c=a[b];switch(c.type){case d.vdom.operation.APPEND_CHILD:var e=
this.cloneNode(c.node);c.source.appendChild(e);break;case d.vdom.operation.REPLACE_CHILD:e=this.isVirtualNode(c.destination)?this.createRealNode(c.destination):c.destination;c.source.replaceChild(e,c.node);break;case d.vdom.operation.REMOVE_CHILD:c.source.removeChild(c.node);break;case d.vdom.operation.REMOVE_ATTRIBUTE:this.removeAttribute(c.source,c.attribute.name);break;case d.vdom.operation.SET_ATTRIBUTE:this.setAttribute(c.source,c.attribute.name,c.attribute.value)}}},cloneNode:function(a){return a.cloneNode?
a.cloneNode(!0):this.createRealNode(a)},createRealNode:function(a){var b;if(a.nodeType===d.vdom.node.TEXT)b=document.createTextNode(a.textContent);else if(a.nodeType===d.vdom.node.ELEMENT){b=document.createElement(a.tagName);if(a.attributes)for(var c=0;c<a.attributes.length;c++){var e=a.attributes[c];this.setAttribute(b,e.name,e.value)}if(a.childNodes){e=document.createDocumentFragment();for(c=0;c<a.childNodes.length;c++){var h=a.childNodes[c];h&&e.appendChild(this.createRealNode(h))}b.appendChild&&
b.appendChild(e)}}else a.nodeType===d.vdom.node.COMPONENT&&(b=document.createElement("DIV"),d.mount(b,a.tagName));return b},createVirtualNode:function(a,b,c){var e;"object"!==typeof a&&(e={tagName:a.toUpperCase(),nodeType:d.vdom.node.ELEMENT,attributes:b,virtual:!0},Array.isArray(c)?e.childNodes=c:e.childNodes="object"===typeof c?[c]:[{nodeType:d.vdom.node.TEXT,textContent:c,virtual:!0}]);return e},createContainerFromNode:function(a){var b;if(this.isVirtualNode(a))b={nodeType:d.vdom.node.ELEMENT,
tagName:"DIV",childNodes:a?[a]:[],virtual:!0};else if(b=document.createDocumentFragment(),a)for(var c in a.childNodes){var e=a.childNodes[c];e.cloneNode&&(e=e.cloneNode(!0),b.appendChild(e))}return b},isVirtualNode:function(a){return a&&!0===a.virtual}}})(sn||(sn={}));
