var sn;(function(f){f.config={logPrefix:"sn: ",debug:!0};f.element=function(b,c,d){return b&&""!==b?f.vdom.createVirtualNode(b,c,d):null};f.log=function(b){!0===f.config.debug&&console.log(f.config.logPrefix+b)};f.isEmpty=function(b){return!f.isDefined(b)||""===b||b==={}};f.isDefined=function(b){return void 0!==b&&null!==b};f.isInteger=function(b){var c;return isNaN(b)?!1:(c=parseFloat(b),(0|c)===c)};f.mount=function(b,c,d){(new f.Component(c)).mount(b,d)};f.version="0.1"})(sn||(sn={}));var el=sn.element;
(function(f){f.componentMethods=["controller","view","dispose"];var b=function(b){this.activeRenderJob=null;this.mounted=!1;this.definition=b;this.observables=[];var d=this;this.scope=new Proxy({},{get:function(b,c){void 0!==b[c]&&"function"!==typeof b[c]&&0>d.observables.indexOf(c)&&(f.log("Observing property <"+d.definition.name+"::"+c.toString()+">"),d.observables.push(c));return b[c]},set:function(b,c,m){b[c]=m;"function"!==typeof m&&0<=d.observables.indexOf(c)&&(f.log("Rendering of <"+d.definition.name+
"> triggered by observable <"+d.definition.name+"::"+c.toString()+">"),d.render());return!0}})};b.prototype.mount=function(b,d){var l=f.vdom.getAttribute(b,"data-sn-component");l&&l.unmount();f.log("Mounting component <"+this.definition.name+">");f.vdom.setAttribute(b,"data-sn-component",this);this.mounted=!0;this.container=b;this.vContainer=f.vdom.createContainerFromNode(b);for(var q in this.definition)"function"==typeof this.definition[q]&&0>f.componentMethods.indexOf(q)&&(this.scope[q]=this.definition[q]);
if(this.definition.controller)if(d){var l=[],m;for(m in d)l.push(d[m]);this.definition.controller.apply(this.scope,l)}else this.definition.controller.call(this.scope);this.render();f.log("Component <"+this.definition.name+"> mounted")};b.prototype.unmount=function(){this.definition.dispose&&this.definition.dispose.call(this.scope);this.mounted=!1;f.log("Component <"+this.definition.name+"> unmounted")};b.prototype.render=function(){var b=this;!0===this.mounted&&this.definition.view?(this.activeRenderJob&&
(f.log("Ignoring 1 rendering request for <"+this.definition.name+">"),clearTimeout(this.activeRenderJob)),this.activeRenderJob=setTimeout(function(){var d=b.definition.view.call(b.scope,b.vContainer);f.vdom.isVirtualNode(d)&&(d=f.vdom.createContainerFromNode(d));d=f.vdom.diffChildren(b.container,d);f.vdom.apply(d);f.log("Rendering component <"+b.definition.name+">");b.activeRenderJob=null},0)):f.log("Rendering request for <"+this.definition.name+"> ignored")};f.Component=b})(sn||(sn={}));
(function(f,b,c){"undefined"!=typeof module&&module.exports?module.exports=c():"function"==typeof define&&define.amd?define(c):b[f]=c();b[f]=c()})("reqwest",window,function(){function f(a,b,g){return function(){if(a._aborted)return g(a.request);if(a._timedOut)return g(a.request,"Request is aborted: timeout");if(a.request&&4==a.request.readyState){a.request.onreadystatechange=K;var c=L.exec(a.url),c=c&&c[1]||w.location.protocol;(M.test(c)?N.test(a.request.status):a.request.response)?b(a.request):g(a.request)}}}
function b(a,b){var g=b.headers||{},c;g.Accept=g.Accept||y.accept[b.type]||y.accept["*"];var e="undefined"!==typeof FormData&&b.data instanceof FormData;b.crossOrigin||g["X-Requested-With"]||(g["X-Requested-With"]=y.requestedWith);g["Content-Type"]||e||(g["Content-Type"]=b.contentType||y.contentType);for(c in g)g.hasOwnProperty(c)&&"setRequestHeader"in a&&a.setRequestHeader(c,g[c])}function c(a){z=a}function d(a,b){return a+(/\?/.test(a)?"&":"?")+b}function l(a,b,g,u){var e=O++,h=a.jsonpCallback||
"callback";a=a.jsonpCallbackName||t.getcallbackPrefix(e);var n=new RegExp("((^|\\?|&)"+h+")=([^&]+)"),f=u.match(n),k=x.createElement("script"),l=0,m=-1!==navigator.userAgent.indexOf("MSIE 10.0");f?"?"===f[3]?u=u.replace(n,"$1="+a):a=f[3]:u=d(u,h+"="+a);w[a]=c;k.type="text/javascript";k.src=u;k.async=!0;"undefined"===typeof k.onreadystatechange||m||(k.htmlFor=k.id="_reqwest_"+e);k.onload=k.onreadystatechange=function(){if(k.readyState&&"complete"!==k.readyState&&"loaded"!==k.readyState||l)return!1;
k.onload=k.onreadystatechange=null;k.onclick&&k.onclick();b(z);z=void 0;D.removeChild(k);l=1};D.appendChild(k);return{abort:function(){k.onload=k.onreadystatechange=null;g({},"Request is aborted: timeout",{});z=void 0;D.removeChild(k);l=1}}}function q(a,C){var g=this.o,c=(g.method||"GET").toUpperCase(),e="string"===typeof g?g:g.url,h=!1!==g.processData&&g.data&&"string"!==typeof g.data?t.toQueryString(g.data):g.data||null,n,S=!1;"jsonp"!=g.type&&"GET"!=c||!h||(e=d(e,h),h=null);if("jsonp"==g.type)return l(g,
a,C,e);n=g.xhr&&g.xhr(g)||P(g);n.open(c,e,!1===g.async?!1:!0);b(n,g);"undefined"!==typeof g.withCredentials&&"undefined"!==typeof n.withCredentials&&(n.withCredentials=!!g.withCredentials);w.XDomainRequest&&n instanceof w.XDomainRequest?(n.onload=a,n.onerror=C,n.onprogress=function(){},S=!0):n.onreadystatechange=f(this,a,C);g.before&&g.before(n);S?setTimeout(function(){n.send(h)},200):n.send(h);return n}function m(a,b){this.o=a;this.fn=b;v.apply(this,arguments)}function p(a){if(null!==a){if(a.match("json"))return"json";
if(a.match("javascript"))return"js";if(a.match("text"))return"html";if(a.match("xml"))return"xml"}}function v(a,b){function g(b){a.timeout&&clearTimeout(e.timeout);for(e.timeout=null;0<e._completeHandlers.length;)e._completeHandlers.shift()(b)}function c(a,b,C){a=e.request;e._responseArgs.resp=a;e._responseArgs.msg=b;e._responseArgs.t=C;for(e._erred=!0;0<e._errorHandlers.length;)e._errorHandlers.shift()(a,b,C);g(a)}this.url="string"==typeof a?a:a.url;this.timeout=null;this._fulfilled=!1;this._successHandler=
function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};var e=this;b=b||function(){};a.timeout&&(this.timeout=setTimeout(function(){e._timedOut=!0;e.request.abort()},a.timeout));a.success&&(this._successHandler=function(){a.success.apply(a,arguments)});a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)});a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)});this.request=q.call(this,
function(h){var d=a.type||h&&p(h.getResponseHeader("Content-Type"));h="jsonp"!==d?e.request:h;var f=F.dataFilter(h.responseText,d);try{h.responseText=f}catch(k){}if(f)switch(d){case "json":try{h=w.JSON?w.JSON.parse(f):eval("("+f+")")}catch(k){return c(h,"Could not parse JSON in response",k)}break;case "js":h=eval(f);break;case "html":h=f;break;case "xml":h=h.responseXML&&h.responseXML.parseError&&h.responseXML.parseError.errorCode&&h.responseXML.parseError.reason?null:h.responseXML}e._responseArgs.resp=
h;e._fulfilled=!0;b(h);for(e._successHandler(h);0<e._fulfillmentHandlers.length;)h=e._fulfillmentHandlers.shift()(h);g(h)},c)}function t(a,b){return new m(a,b)}function r(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function E(a,b){var g=a.name,c=a.tagName.toLowerCase(),e=function(a){a&&!a.disabled&&b(g,r(a.attributes.value&&a.attributes.value.specified?a.value:a.text))},h;if(!a.disabled&&g)switch(c){case "input":/reset|button|image|file/i.test(a.type)||(e=/checkbox/i.test(a.type),c=/radio/i.test(a.type),
h=a.value,(!e&&!c||a.checked)&&b(g,r(e&&""===h?"on":h)));break;case "textarea":b(g,r(a.value));break;case "select":if("select-one"===a.type.toLowerCase())e(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(c=0;a.length&&c<a.length;c++)a.options[c].selected&&e(a.options[c])}}function G(){var a,b;for(b=0;b<arguments.length;b++){a=arguments[b];/input|select|textarea/i.test(a.tagName)&&E(a,this);var g=["input","select","textarea"],c,e,h;for(c=0;c<g.length;c++)for(h=a[H](g[c]),e=0;e<h.length;e++)E(h[e],
this)}}function J(){return t.toQueryString(t.serializeArray.apply(null,arguments))}function Q(){var a={};G.apply(function(b,g){b in a?(a[b]&&!A(a[b])&&(a[b]=[a[b]]),a[b].push(g)):a[b]=g},arguments);return a}function I(a,b,g,c){var e,h,d=/\[\]$/;if(A(b))for(e=0;b&&e<b.length;e++)h=b[e],g||d.test(a)?c(a,h):I(a+"["+("object"===typeof h?e:"")+"]",h,g,c);else if(b&&"[object Object]"===b.toString())for(e in b)I(a+"["+e+"]",b[e],g,c);else c(a,b)}var w=this;if("document"in w)var x=document,H="getElementsByTagName",
D=x[H]("head")[0];else{var B;try{B=require("xhr2")}catch(a){throw Error("Peer dependency `xhr2` required! Please npm install xhr2");}}var M=/^http/,L=/(^\w+):\/\//,N=/^(20\d|1223)$/,O=0,R="reqwest_"+ +new Date,z,K=function(){},A="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},y={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",
html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},P=function(a){if(!0===a.crossOrigin){var b=w.XMLHttpRequest?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(w.XDomainRequest){b=/^https?/;if(window.location.href.match(b)[0]!==a.url.match(b)[0])throw Error("XDomainRequest: requests must be targeted to the same scheme as the hosting page.");return new XDomainRequest}throw Error("Browser does not support cross-origin requests");
}return w.XMLHttpRequest?new XMLHttpRequest:B?new B:new ActiveXObject("Microsoft.XMLHTTP")},F={dataFilter:function(a){return a}};m.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){v.call(this,this.o,this.fn)},then:function(a,b){a=a||function(){};b=b||function(){};this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b));
return this},always:function(a){this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a);return this},fail:function(a){this._erred?a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a);return this},"catch":function(a){return this.fail(a)}};t.serializeArray=function(){var a=[];G.apply(function(b,g){a.push({name:b,value:g})},arguments);return a};t.serialize=function(){if(0===arguments.length)return"";var a,b=Array.prototype.slice.call(arguments,
0);(a=b.pop())&&a.nodeType&&b.push(a)&&(a=null);a&&(a=a.type);return("map"==a?Q:"array"==a?t.serializeArray:J).apply(null,b)};t.toQueryString=function(a,b){var g,c=b||!1,e=[],h=encodeURIComponent,d=function(a,b){b="function"===typeof b?b():null==b?"":b;e[e.length]=h(a)+"="+h(b)};if(A(a))for(g=0;a&&g<a.length;g++)d(a[g].name,a[g].value);else for(g in a)a.hasOwnProperty(g)&&I(g,a[g],c,d);return e.join("&").replace(/%20/g,"+")};t.getcallbackPrefix=function(){return R};t.compat=function(a,b){a&&(a.type&&
(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,a.jsonp&&(a.jsonpCallback=a.jsonp));return new m(a,b)};t.ajaxSetup=function(a){a=a||{};for(var b in a)F[b]=a[b]};return t});
(function(f){f.request=function(){function b(a,b,g){return function(){if(a._aborted)return g(a.request);if(a._timedOut)return g(a.request,"Request is aborted: timeout");if(a.request&&4==a.request.readyState){a.request.onreadystatechange=K;var c=L.exec(a.url),c=c&&c[1]||x.location.protocol;(M.test(c)?N.test(a.request.status):a.request.response)?b(a.request):g(a.request)}}}function c(a,b){var c=b.headers||{},d;c.Accept=c.Accept||y.accept[b.type]||y.accept["*"];var e="undefined"!==typeof FormData&&b.data instanceof
FormData;b.crossOrigin||c["X-Requested-With"]||(c["X-Requested-With"]=y.requestedWith);c["Content-Type"]||e||(c["Content-Type"]=b.contentType||y.contentType);for(d in c)c.hasOwnProperty(d)&&"setRequestHeader"in a&&a.setRequestHeader(d,c[d])}function d(a){z=a}function f(a,b){return a+(/\?/.test(a)?"&":"?")+b}function q(a,b,c,u){var e=O++,h=a.jsonpCallback||"callback";a=a.jsonpCallbackName||r.getcallbackPrefix(e);var n=new RegExp("((^|\\?|&)"+h+")=([^&]+)"),m=u.match(n),k=H.createElement("script"),
p=0,q=-1!==navigator.userAgent.indexOf("MSIE 10.0");m?"?"===m[3]?u=u.replace(n,"$1="+a):a=m[3]:u=f(u,h+"="+a);x[a]=d;k.type="text/javascript";k.src=u;k.async=!0;"undefined"===typeof k.onreadystatechange||q||(k.htmlFor=k.id="_reqwest_"+e);k.onload=k.onreadystatechange=function(){if(k.readyState&&"complete"!==k.readyState&&"loaded"!==k.readyState||p)return!1;k.onload=k.onreadystatechange=null;k.onclick&&k.onclick();b(z);z=void 0;B.removeChild(k);p=1};B.appendChild(k);return{abort:function(){k.onload=
k.onreadystatechange=null;c({},"Request is aborted: timeout",{});z=void 0;B.removeChild(k);p=1}}}function m(a,d){var g=this.o,u=(g.method||"GET").toUpperCase(),e="string"===typeof g?g:g.url,h=!1!==g.processData&&g.data&&"string"!==typeof g.data?r.toQueryString(g.data):g.data||null,n,m=!1;"jsonp"!=g.type&&"GET"!=u||!h||(e=f(e,h),h=null);if("jsonp"==g.type)return q(g,a,d,e);n=g.xhr&&g.xhr(g)||P(g);n.open(u,e,!1===g.async?!1:!0);c(n,g);"undefined"!==typeof g.withCredentials&&"undefined"!==typeof n.withCredentials&&
(n.withCredentials=!!g.withCredentials);x.XDomainRequest&&n instanceof x.XDomainRequest?(n.onload=a,n.onerror=d,n.onprogress=function(){},m=!0):n.onreadystatechange=b(this,a,d);g.before&&g.before(n);m?setTimeout(function(){n.send(h)},200):n.send(h);return n}function p(a,b){this.o=a;this.fn=b;t.apply(this,arguments)}function v(a){if(null!==a){if(a.match("json"))return"json";if(a.match("javascript"))return"js";if(a.match("text"))return"html";if(a.match("xml"))return"xml"}}function t(a,b){function c(b){a.timeout&&
clearTimeout(e.timeout);for(e.timeout=null;0<e._completeHandlers.length;)e._completeHandlers.shift()(b)}function d(a,b,f){a=e.request;e._responseArgs.resp=a;e._responseArgs.msg=b;e._responseArgs.t=f;for(e._erred=!0;0<e._errorHandlers.length;)e._errorHandlers.shift()(a,b,f);c(a)}this.url="string"==typeof a?a:a.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};
var e=this;b=b||function(){};a.timeout&&(this.timeout=setTimeout(function(){e._timedOut=!0;e.request.abort()},a.timeout));a.success&&(this._successHandler=function(){a.success.apply(a,arguments)});a.error&&this._errorHandlers.push(function(){a.error.apply(a,arguments)});a.complete&&this._completeHandlers.push(function(){a.complete.apply(a,arguments)});this.request=m.call(this,function(h){var f=a.type||h&&v(h.getResponseHeader("Content-Type"));h="jsonp"!==f?e.request:h;var l=F.dataFilter(h.responseText,
f);try{h.responseText=l}catch(k){}if(l)switch(f){case "json":try{h=x.JSON?x.JSON.parse(l):eval("("+l+")")}catch(k){return d(h,"Could not parse JSON in response",k)}break;case "js":h=eval(l);break;case "html":h=l;break;case "xml":h=h.responseXML&&h.responseXML.parseError&&h.responseXML.parseError.errorCode&&h.responseXML.parseError.reason?null:h.responseXML}e._responseArgs.resp=h;e._fulfilled=!0;b(h);for(e._successHandler(h);0<e._fulfillmentHandlers.length;)h=e._fulfillmentHandlers.shift()(h);c(h)},
d)}function r(a,b){return new p(a,b)}function E(a){return a?a.replace(/\r?\n/g,"\r\n"):""}function G(a,b){var c=a.name,d=a.tagName.toLowerCase(),e=function(a){a&&!a.disabled&&b(c,E(a.attributes.value&&a.attributes.value.specified?a.value:a.text))},h;if(!a.disabled&&c)switch(d){case "input":/reset|button|image|file/i.test(a.type)||(e=/checkbox/i.test(a.type),d=/radio/i.test(a.type),h=a.value,(!e&&!d||a.checked)&&b(c,E(e&&""===h?"on":h)));break;case "textarea":b(c,E(a.value));break;case "select":if("select-one"===
a.type.toLowerCase())e(0<=a.selectedIndex?a.options[a.selectedIndex]:null);else for(d=0;a.length&&d<a.length;d++)a.options[d].selected&&e(a.options[d])}}function J(){var a,b;for(b=0;b<arguments.length;b++){a=arguments[b];/input|select|textarea/i.test(a.tagName)&&G(a,this);var c=["input","select","textarea"],d,e,h;for(d=0;d<c.length;d++)for(h=a[D](c[d]),e=0;e<h.length;e++)G(h[e],this)}}function Q(){return r.toQueryString(r.serializeArray.apply(null,arguments))}function I(){var a={};J.apply(function(b,
c){b in a?(a[b]&&!A(a[b])&&(a[b]=[a[b]]),a[b].push(c)):a[b]=c},arguments);return a}function w(a,b,c,d){var e,h,f=/\[\]$/;if(A(b))for(e=0;b&&e<b.length;e++)h=b[e],c||f.test(a)?d(a,h):w(a+"["+("object"===typeof h?e:"")+"]",h,c,d);else if(b&&"[object Object]"===b.toString())for(e in b)w(a+"["+e+"]",b[e],c,d);else d(a,b)}var x=this;if("document"in x)var H=document,D="getElementsByTagName",B=H[D]("head")[0];else throw Error("Peer dependency `xhr2` required! Please npm install xhr2");var M=/^http/,L=/(^\w+):\/\//,
N=/^(20\d|1223)$/,O=0,R="reqwest_"+ +new Date,z,K=function(){},A="function"==typeof Array.isArray?Array.isArray:function(a){return a instanceof Array},y={contentType:"application/x-www-form-urlencoded",requestedWith:"XMLHttpRequest",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},P=function(a){if(!0===a.crossOrigin){var b=
x.XMLHttpRequest?new XMLHttpRequest:null;if(b&&"withCredentials"in b)return b;if(x.XDomainRequest){b=/^https?/;if(window.location.href.match(b)[0]!==a.url.match(b)[0])throw Error("XDomainRequest: requests must be targeted to the same scheme as the hosting page.");return new XDomainRequest}throw Error("Browser does not support cross-origin requests");}return x.XMLHttpRequest?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},F={dataFilter:function(a){return a}};p.prototype={abort:function(){this._aborted=
!0;this.request.abort()},retry:function(){t.call(this,this.o,this.fn)},then:function(a,b){a=a||function(){};b=b||function(){};this._fulfilled?this._responseArgs.resp=a(this._responseArgs.resp):this._erred?b(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(a),this._errorHandlers.push(b));return this},always:function(a){this._fulfilled||this._erred?a(this._responseArgs.resp):this._completeHandlers.push(a);return this},fail:function(a){this._erred?
a(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(a);return this},"catch":function(a){return this.fail(a)}};r.serializeArray=function(){var a=[];J.apply(function(b,c){a.push({name:b,value:c})},arguments);return a};r.serialize=function(){if(0===arguments.length)return"";var a,b=Array.prototype.slice.call(arguments,0);(a=b.pop())&&a.nodeType&&b.push(a)&&(a=null);a&&(a=a.type);return("map"==a?I:"array"==a?r.serializeArray:Q).apply(null,b)};r.toQueryString=
function(a,b){var c,d=b||!1,e=[],h=encodeURIComponent,f=function(a,b){b="function"===typeof b?b():null==b?"":b;e[e.length]=h(a)+"="+h(b)};if(A(a))for(c=0;a&&c<a.length;c++)f(a[c].name,a[c].value);else for(c in a)a.hasOwnProperty(c)&&w(c,a[c],d,f);return e.join("&").replace(/%20/g,"+")};r.getcallbackPrefix=function(){return R};r.compat=function(a,b){a&&(a.type&&(a.method=a.type)&&delete a.type,a.dataType&&(a.type=a.dataType),a.jsonpCallback&&(a.jsonpCallbackName=a.jsonpCallback)&&delete a.jsonpCallback,
a.jsonp&&(a.jsonpCallback=a.jsonp));return new p(a,b)};r.ajaxSetup=function(a){a=a||{};for(var b in a)F[b]=a[b]};return r}()})(sn||(sn={}));(function(f){f.request=window.reqwest})(sn||(sn={}));
(function(f){f.router={routes:{},params:[],named_params:{},enabled:!1,getPath:function(){var b=window.location.href.match(/#(.*)$/);return"/"+this.clearSlashes(b?b[1]:"")},clearSlashes:function(b){return b.toString().replace(/\/$/,"").replace(/^\//,"")},param:function(b,c){return f.isInteger(b)?this.params[b]||c:this.named_params[b]||c},update:function(){var b=this.getPath(),c=[],d={},b=b.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(b,c,f){d[c]=decodeURIComponent(f);return""}),l;for(l in this.routes){var q=
"^"+l.replace(/:[^/]+/g,"([^/]+)")+"$";if(q=b.match(q)){q.shift();var b=l.match(/:([^/:]+)/g),m;for(m in b){var p=decodeURIComponent(q[m]);c.push(p);d[b[m].replace(":","")]=p}this.params=c;this.named_params=d;f.log("Taking route "+l);this.routes[l]();break}}},setEnabled:function(b){var c=this;!0!==b||this.enabled?b||(window.removeEventListener("hashchange",this.update.bind(this)),this.enabled=!1):setTimeout(function(){window.addEventListener("hashchange",c.update.bind(c));c.enabled=!0;c.update()},
0)},setRoutes:function(b){this.routes=b;this.setEnabled(!0)},redirect:function(b,c){if(c)for(var d in c)b=b.replace(":"+d,encodeURIComponent(c[d]));window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+b}}})(sn||(sn={}));
(function(f){f.vdom={operation:{APPEND_CHILD:"APPEND_CHILD",REPLACE_CHILD:"REPLACE_CHILD",REMOVE_CHILD:"REMOVE_CHILD",REMOVE_ATTRIBUTE:"REMOVE_ATTRIBUTE",SET_ATTRIBUTE:"SET_ATTRIBUTE",SET_EVENT:"SET_EVENT"},node:{COMMENT:8,ELEMENT:1,TEXT:3,COMPONENT:99},setAttribute:function(b,c,d){"class"===c?b.className=d:"style"===c?b.style.cssText=d:"type"!==c&&c in b||"string"!==typeof d?b[c]=null==d?"":d:b.setAttribute?b.setAttribute(c,d):b.attributes&&(b.attributes[c]=d)},getAttribute:function(b,c){if("class"===
c)return b.className;if("style"===c)return b.style.cssText;if("type"!==c&&c in b)return b[c];if(b.getAttribute)return b.getAttribute(c);if(b.attributes&&b.attributes[c])return b.attributes[c].value},removeAttribute:function(b,c){"class"===c?b.className="":"style"===c?b.style.cssText="":"type"!==c&&c in b?b[c]="":b.removeAttribute?b.removeAttribute(c):b.attributes&&delete b.attributes[c]},diffNode:function(b,c){for(var d=[],l=b.attributes||[],q=c.attributes||[],m=0;m<l.length;m++){var p=l[m],v=q[p.name],
t=this.getAttribute(b,p.name),r=this.getAttribute(c,p.name);v?t!==r&&d.push({type:f.vdom.operation.SET_ATTRIBUTE,source:b,destination:c,attribute:{name:p.name,value:r}}):d.push({type:f.vdom.operation.REMOVE_ATTRIBUTE,source:b,attribute:{name:p.name}})}for(m=0;m<q.length;m++)p=q[m],l[p.name]||(v=this.getAttribute(c,p.name),d.push({type:f.vdom.operation.SET_ATTRIBUTE,source:b,destination:c,attribute:{name:p.name,value:v}}));return d=d.concat(this.diffChildren(b,c))},diffChildren:function(b,c){for(var d=
[],l=c.childNodes?c.childNodes.length:0,q=b.childNodes?b.childNodes.length:0,m=0;m<l;m++){var p=c.childNodes[m],v=b.childNodes[m];v?v.nodeType!==p.nodeType||v.tagName||v.tagName!==p.tagName?f.vdom.getAttribute(v,"data-sn-component")||d.push({type:f.vdom.operation.REPLACE_CHILD,source:b,destination:p,node:v}):d=d.concat(this.diffNode(v,p)):d.push({type:f.vdom.operation.APPEND_CHILD,source:b,node:p})}if(l<q)for(;l<q;l++)d.push({type:f.vdom.operation.REMOVE_CHILD,source:b,node:b.childNodes[l]});return d},
apply:function(b){for(var c in b){var d=b[c];switch(d.type){case f.vdom.operation.APPEND_CHILD:var l=this.cloneNode(d.node);d.source.appendChild(l);break;case f.vdom.operation.REPLACE_CHILD:l=this.isVirtualNode(d.destination)?this.createRealNode(d.destination):d.destination;d.source.replaceChild(l,d.node);break;case f.vdom.operation.REMOVE_CHILD:d.source.removeChild(d.node);break;case f.vdom.operation.REMOVE_ATTRIBUTE:this.removeAttribute(d.source,d.attribute.name);break;case f.vdom.operation.SET_ATTRIBUTE:this.setAttribute(d.source,
d.attribute.name,d.attribute.value)}}},cloneNode:function(b){return b.cloneNode?b.cloneNode(!0):this.createRealNode(b)},createRealNode:function(b){var c;if(b.nodeType===f.vdom.node.TEXT)c=document.createTextNode(b.textContent);else if(b.nodeType===f.vdom.node.ELEMENT){c=document.createElement(b.tagName);if(b.attributes)for(var d=0;d<b.attributes.length;d++){var l=b.attributes[d];this.setAttribute(c,l.name,l.value)}if(b.childNodes){l=document.createDocumentFragment();for(d=0;d<b.childNodes.length;d++){var q=
b.childNodes[d];q&&l.appendChild(this.createRealNode(q))}c.appendChild&&c.appendChild(l)}}else b.nodeType===f.vdom.node.COMPONENT&&(c=document.createElement("DIV"),f.mount(c,b.tagName,b.attributes));return c},createVirtualNode:function(b,c,d){"object"===typeof b?b={nodeType:f.vdom.node.COMPONENT,tagName:b,attributes:c,virtual:!0}:(b={tagName:b.toUpperCase(),nodeType:f.vdom.node.ELEMENT,attributes:c,virtual:!0},Array.isArray(d)?b.childNodes=d:b.childNodes="object"===typeof d?[d]:[{nodeType:f.vdom.node.TEXT,
textContent:d,virtual:!0}]);return b},createContainerFromNode:function(b){var c;if(this.isVirtualNode(b))c=this.createVirtualNode("DIV",null,b);else if(c=document.createDocumentFragment(),b)for(var d in b.childNodes){var f=b.childNodes[d];f.cloneNode&&(f=f.cloneNode(!0),c.appendChild(f))}return c},isVirtualNode:function(b){return b&&!0===b.virtual}}})(sn||(sn={}));
