var sn;
(function(b){b.vdom={operation:{APPEND_CHILD:"APPEND_CHILD",REPLACE_CHILD:"REPLACE_CHILD",REMOVE_CHILD:"REMOVE_CHILD",REMOVE_ATTRIBUTE:"REMOVE_ATTRIBUTE",SET_ATTRIBUTE:"SET_ATTRIBUTE",SET_TEXT_CONTENT:"SET_TEXT_CONTENT",SET_EVENT:"SET_EVENT"},node:{COMMENT:8,ELEMENT:1,TEXT:3,COMPONENT:99},setAttribute:function(a,c,b){"class"===c?a.className=b:"style"===c?a.style.cssText=b:"type"!==c&&c in a||"string"!==typeof b?a[c]=null==b?"":b:a.setAttribute?a.setAttribute(c,b):a.attributes&&(a.attributes[c]=b)},
getAttribute:function(a,c){return"class"===c?a.className:"style"===c?a.style.cssText:"type"!==c&&c in a?a[c]:a.getAttribute?a.getAttribute(c):a.attributes?a.attributes[c]:null},removeAttribute:function(a,c){"class"===c?a.className="":"style"===c?a.style.cssText="":"type"!==c&&c in a?a[c]="":a.removeAttribute?a.removeAttribute(c):a.attributes&&delete a.attributes[c]},patch:function(a,c){for(var d in a){var e=a[d];switch(e.type){case b.vdom.operation.APPEND_CHILD:e.target.appendChild(this.createRealNode(e.child,
c));break;case b.vdom.operation.REPLACE_CHILD:e.target.replaceChild(this.createRealNode(e.child,c),e.oldChild);break;case b.vdom.operation.REMOVE_CHILD:e.target.removeChild(e.child);break;case b.vdom.operation.REMOVE_ATTRIBUTE:this.removeAttribute(e.target,e.name);break;case b.vdom.operation.SET_ATTRIBUTE:this.setAttribute(e.target,e.name,e.value);break;case b.vdom.operation.SET_TEXT_CONTENT:e.target.textContent=e.value}}},diff:function(a,c,d){var e=[],f=a.attributes||[],g=c.attributes||{};if(!d){for(d=
0;d<f.length;d++){var h=f[d],k=g[h.name],n=this.getAttribute(a,h.name),m=this.getAttribute(c,h.name);k?n!==m&&e.push({type:b.vdom.operation.SET_ATTRIBUTE,target:a,name:h.name,value:m}):e.push({type:b.vdom.operation.REMOVE_ATTRIBUTE,target:a,name:h.name})}for(var l in g){g=!1;for(d=0;d<f.length;d++)if(f[d].name===l){g=!0;break}g||(g=this.getAttribute(c,l),e.push({type:b.vdom.operation.SET_ATTRIBUTE,target:a,name:l,value:g}))}}c.nodeType===b.vdom.node.TEXT&&c.textContent!=a.textContent&&e.push({type:b.vdom.operation.SET_TEXT_CONTENT,
target:a,value:c.textContent});l=c.childNodes?c.childNodes.length:0;f=a.childNodes?a.childNodes.length:0;for(g=0;g<l;g++)d=c.childNodes[g],(h=a.childNodes?a.childNodes[g]:null)?b.isEmpty(d)?e.push({type:b.vdom.operation.REMOVE_CHILD,target:a,child:a.childNodes[g]}):h.nodeType!==d.nodeType||h.tagName!==d.tagName?d.nodeType!==b.vdom.node.COMPONENT&&e.push({type:b.vdom.operation.REPLACE_CHILD,target:a,child:d,oldChild:h}):e=e.concat(this.diff(h,d)):b.isEmpty(d)||e.push({type:b.vdom.operation.APPEND_CHILD,
target:a,child:d});if(l<f)for(c=l;c<f;c++)e.push({type:b.vdom.operation.REMOVE_CHILD,target:a,child:a.childNodes[c]});return e},createRealNode:function(a,c){var d;if(a.nodeType===b.vdom.node.TEXT)d=document.createTextNode(a.textContent);else if(a.nodeType===b.vdom.node.ELEMENT){d=document.createElement(a.tagName);if(a.attributes)for(var e in a.attributes){var f=a.attributes[e];"function"===typeof f&&(f=f.bind(c));this.setAttribute(d,e,f)}if(a.childNodes){e=document.createDocumentFragment();for(f=
0;f<a.childNodes.length;f++){var g=a.childNodes[f];g&&e.appendChild(this.createRealNode(g,c))}d.appendChild&&d.appendChild(e)}}else a.nodeType===b.vdom.node.COMPONENT&&(d=document.createElement("DIV"),b.mount(d,a.tagName,a.attributes));return d},createVirtualNode:function(a,c,d){b.isDefined(d)||b.isObject(c)||(d=c,c=null);b.isObject(a)?a={nodeType:b.vdom.node.COMPONENT,tagName:a,attributes:c}:(a={tagName:a.toUpperCase(),nodeType:b.vdom.node.ELEMENT,attributes:c},b.isArray(d)?a.childNodes=d:b.isObject(d)?
a.childNodes=[d]:b.isEmpty(d)||(a.childNodes=[{nodeType:b.vdom.node.TEXT,textContent:d}]));return a}}})(sn||(sn={}));var el=sn.vdom.createVirtualNode;
(function(b){b.router={routes:{},params:[],named_params:{},enabled:!1,getPath:function(){var a=window.location.href.match(/#(.*)$/);return"/"+this.clearSlashes(a?a[1]:"")},clearSlashes:function(a){return a.toString().replace(/\/$/,"").replace(/^\//,"")},param:function(a,c){return b.isInteger(a)?this.params[a]||c:this.named_params[a]||c},update:function(){var a=this,c=this.getPath(),d=[],e={},c=c.replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(a,c,b){e[c]=decodeURIComponent(b);return""}),f={},g;for(g in this.routes){f.rule=
g;var h="^"+f.rule.replace(/:[^/]+/g,"([^/]+)")+"$";if(h=c.match(h)){h.shift();var c=f.rule.match(/:([^/:]+)/g),k;for(k in c)g=decodeURIComponent(h[k]),d.push(g),e[c[k].replace(":","")]=g;this.params=d;this.named_params=e;setTimeout(function(c){return function(){b.log("Taking route "+c.rule);a.routes[c.rule]()}}(f),0);break}f={rule:f.rule}}},setEnabled:function(a){!0!==a||this.enabled?a||(window.removeEventListener("hashchange",this.update.bind(this)),this.enabled=!1):(window.addEventListener("hashchange",
this.update.bind(this)),this.enabled=!0,this.update())},setRoutes:function(a){this.routes=a;this.setEnabled(!0)},route:function(a,c){if(c)for(var b in c)a=a.replace(":"+b,encodeURIComponent(c[b]));window.location.href=window.location.href.replace(/#(.*)$/,"")+"#"+a}}})(sn||(sn={}));
(function(b){b.component={lifeCycle:["init","update","render","dispose"],abortComponentRendering:function(a){a.$pendingRendering&&(b.log("Ignoring rendering request of component <"+a.definition.name+">"),clearTimeout(a.$pendingRendering))},requestComponentRendering:function(a){this.abortComponentRendering(a);a.$pendingRendering=setTimeout(function(){a.render();a.$pendingRendering=null},0)},propertyChanged:function(a,d){b.log("Rendering component <"+a.definition.name+"> triggered by <"+d.toString()+
">");this.requestComponentRendering(a)}};var a=function(a){this.definition=a;this.observables=[];this.scope=this.createScope()};a.prototype.createScope=function(a){var d=this,e=b.guid();return new Proxy(a||{},{get:function(a,c){var h=e+c.toString();!b.isDefined(a[c])||b.isFunction(a[c])||"__proto__"===c||c.toString().startsWith("$")||b.inArray(d.observables,h)||(b.log("Observing property <"+c.toString()+"> of scope <"+e+">"),d.observables.push(h));return a[c]},set:function(a,c,h){var k=e+c.toString();
"object"===typeof h&&(h=d.createScope(h));a[c]=h;!b.isFunction(h)&&b.inArray(d.observables,k)&&b.component.propertyChanged(d,k);return!0}})};a.prototype.mount=function(a,d){b.log("Mounting component <"+this.definition.name+">");var e=b.vdom.getAttribute(a,"data-sn-component");b.isDefined(e)&&e.dispose();b.vdom.setAttribute(a,"data-sn-component",this);this.container=a;for(var f in this.definition)"function"==typeof this.definition[f]&&0>b.component.lifeCycle.indexOf(f)&&(this.scope[f]=this.definition[f]);
this.init(d);this.update(d);b.log("Component <"+this.definition.name+"> mounted")};a.prototype.controller=function(a,b){if(this.definition[a])if(arguments){var e=[],f;for(f in b)e.push(b[f]);this.definition[a].apply(this.scope,e)}else this.definition[a].call(this.scope)};a.prototype.init=function(a){this.controller("init",a);b.log("Component <"+this.definition.name+"> initialized")};a.prototype.update=function(a){this.controller("update",a);b.component.requestComponentRendering(this);b.log("Component <"+
this.definition.name+"> updated")};a.prototype.render=function(){if(this.definition.render){var a=this.definition.render.call(this.scope),a=b.vdom.createVirtualNode(this.container.tagName,null,a),a=b.vdom.diff(this.container,a,!0);b.vdom.patch(a,this.scope);b.log("Component <"+this.definition.name+"> rendered")}};a.prototype.dispose=function(){b.component.abortComponentRendering(this);this.definition.dispose&&this.definition.dispose.call(this.scope);b.log("Component <"+this.definition.name+"> unmounted")};
b.Component=a})(sn||(sn={}));
(function(b){var a=function(a,d,e,f){this.url=d;this.method=a;this.data=e;this.options=b.extend({timeout:5E3,async:!0,withCredentials:!1,ct:"application/x-www-form-urlencoded"},f||{});this.init()};a.prototype.abort=function(){this.xhr.abort();this.failCallback&&this.failCallback(this.xhr.status);this.alwaysCallback&&this.alwaysCallback()};a.prototype.init=function(){var a=this;try{this.xhr=new XMLHttpRequest}catch(d){try{this.xhr=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return b.error("XMLHttpRequest not supported"),null}}this.xhr.withCredentials&&
(this.xhr.withCredentials=this.options.withCredentials);this.xhr.onreadystatechange=function(){4==a.xhr.readyState&&(clearTimeout(a.requestTimeout),200!=a.xhr.status?a.failCallback&&a.failCallback(a.xhr.responseText,a.xhr):a.successCallback&&a.successCallback(a.xhr.responseText,a.xhr),a.alwaysCallback&&a.alwaysCallback(a.xhr.responseText,a.xhr))};this.requestTimeout=setTimeout(function(){a.abort()},this.options.timeout);this.xhr.open(this.method.toUpperCase(),this.url,this.options.async);this.data?
(this.xhr.setRequestHeader("Content-type",this.options.ct),this.xhr.send(this.data)):this.xhr.send(null)};a.prototype.success=function(a){this.successCallback=a;return this};a.prototype.fail=function(a){this.failCallback=a;return this};a.prototype.always=function(a){this.alwaysCallback=a;return this};b.RequestObject=a;b.request={get:function(a,d,e){return new b.RequestObject("GET",a,d,e)},post:function(a,d,e){return new b.RequestObject("POST",a,d,e)}}})(sn||(sn={}));
(function(b){b.validation={required:function(a){return!b.isEmpty(a)}}})(sn||(sn={}));
(function(b){var a=function(a){this.$rules=a||{};this.$errors={};this.$pristine=!0};a.prototype.isValid=function(){for(var a in this.$errors)if(!b.isEmpty(this.$errors[a]))return!1;return!0};a.prototype.isPristine=function(){return this.$pristine};a.prototype.validateField=function(a){var d=[],e=this.$rules[a];if(!b.isEmpty(e)){b.isArray(e)||(e=[e]);for(var f in e){var g=e[f];!0!==b.validation[g](this[a])&&d.push(g)}}return d};a.prototype.field=function(a,d,e){var f=this;d=b.extend({name:a,value:this[a]||
"",onchange:function(b){f[a]=b.target.value;f.$errors[a]=f.validateField(a);f.$pristine=!1}},e||{});var g=e?"select":!0===d.multiline?"textarea":"input";switch(g){case "input":d.type||(d.type="text");break;case "textarea":delete d.multiline}return{name:"FormField",render:function(){return el(g,d)}}};b.Form=a})(sn||(sn={}));
(function(b){b.config={logPrefix:"sn: ",debug:!0};b.error=function(a){if(!0===b.config.debug)throw Error(b.config.logPrefix+a);};b.log=function(a){!0===b.config.debug&&console.log(b.config.logPrefix+a)};b.extend=function(a,b){return Object.assign?Object.assign(a,b):a};b.isObject=function(a){return"object"===typeof a};b.isArray=function(a){return Array.isArray(a)};b.isDefined=function(a){return void 0!==a&&null!==a};b.isFunction=function(a){return"function"===typeof a};b.inArray=function(a,b){return 0<=
a.indexOf(b)};b.isInteger=function(a){var b;return isNaN(a)?!1:(b=parseFloat(a),(0|b)===b)};b.guid=function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()};b.isEmpty=function(a){return!b.isDefined(a)||""===a||b.isArray(a)&&1>a.length||b.isObject(a)&&1>Object.keys(a).length};b.mount=function(a,c,d){var e=b.vdom.getAttribute(a,"data-sn-component");e&&e.definition===c?e.update(d):(new b.Component(c)).mount(a,
d)};b.bind=function(a,b){return function(d){b[a]=d.target.value}}})(sn||(sn={}));
